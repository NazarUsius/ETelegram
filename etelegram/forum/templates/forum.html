{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container py-5">

    <div class="d-flex justify-content-between align-items-center mb-5 flex-wrap">
        <h2 class="mb-0 text-primary" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            🌐 Обговорення & Гілки
        </h2>
        <a href="{% url 'branch_create' %}" class="btn btn-gradient btn-lg shadow-lg px-4 py-2 d-flex align-items-center gap-2">
            <i class="bi bi-plus-circle-fill"></i> ➕ Нова гілка
        </a>
    </div>

    <div class="row justify-content-center">
        {% for data in branch_data %}
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card shadow-sm border-light rounded-3 h-100 transition-all hover-zoom-in" style="max-width: 100%; min-height: 350px;">
                    <div class="card-body d-flex flex-column h-100">
                        <h5 class="card-title text-success mb-2">📌 {{ data.branch.title }}</h5>
                        <p class="card-text flex-grow-1">{{ data.branch.description }}</p>

                        {% if data.branch.media %}
                            <img src="{{ data.branch.media.url }}" class="img-fluid rounded mb-3" alt="image" style="height: 200px; object-fit: cover;">
                        {% endif %}

                        <p class="text-muted"><small>🗓️ {{ data.branch.created_at }}</small></p>

                        <div class="d-flex justify-content-start gap-3 mb-3">
                            <span class="badge bg-success">👍 {{ data.likes }}</span>
                            <span class="badge bg-danger">👎 {{ data.dislikes }}</span>
                        </div>

                        <a href="{% url 'branch_detail' data.branch.pk %}" class="btn btn-outline-primary btn-sm mb-3">
                            🔍 Детальніше
                        </a>



                    </div>
                </div>
            </div>
        {% empty %}
            <div class="alert alert-info text-center animate__animated animate__fadeIn">
                <h4>😢 Поки що немає дописів</h4>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
